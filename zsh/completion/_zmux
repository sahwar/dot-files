#compdef zmux

local repo="$HOME/.tmux-sessions"

local curcontext=$curcontext sessions state line 

if which zmux &> /dev/null; then
	sessions=$(zmux list)
fi

declare -A opt_args

_arguments\
	'1: :->cmd'\
	'2: :->session'\
	'3: :->directory'

case $state in
	cmd)
		_arguments "1:Command:($(zmux list-commands))"
		;;
	session)
		_arguments "2:Session:(${sessions})"
		;;
	directory)
		if [[ $words[2] == 'new' ]]; then
			_files -/ -X 'Project directory'
		fi
		;;
esac
